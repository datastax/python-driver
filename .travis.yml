dist: xenial
language: python
os: linux

env:
  - CASS_DRIVER_NO_CYTHON=1

addons:
  apt:
    packages:
    - build-essential
    - python-dev
    - pypy-dev
    - libc-ares-dev
    - libev4
    - libev-dev

install:
  - pip install --upgrade setuptools
  - pip install tox-travis
  - if [[ $TRAVIS_PYTHON_VERSION != pypy3.5 ]]; then pip install lz4; fi

script:
  - tox
  - tox -e gevent_loop
  - tox -e eventlet_loop
  - python setup.py bdist_wheel
jobs:
  include:
    - arch: amd64
      python: "pypy2.7-6.0"

    - arch: amd64
      python: "pypy3.5"

    - arch: amd64
      python: "3.5"

    - arch: amd64
      python: "2.7"

    - arch: amd64
      python: "3.6"

    - arch: amd64
      python: "3.7"

    - arch: arm64
      python: "3.8"
    
    - arch: arm64
      python: "3.5"
    
    - arch: arm64
      python: "3.6"

    - arch: arm64
      python: "3.7"

    - arch: arm64
      python: "2.7"
